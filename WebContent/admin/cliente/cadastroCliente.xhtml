<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui" xml:lang="pt-BR" lang="pt-BR"
	xmlns:ui="http://java.sun.com/jsf/facelets">
	<p:panel header="Dados Cliente" id="panelDadosCliente">
		<h:messages />
		<h:panelGrid columns="2">
			<h:outputLabel value="Nome: " for="clienteNome" />
			<p:inputText id="clienteNome" value="#{cadastroClienteMB.cliente.nome}" required="true" requiredMessage="O campo nome é obrigatório"/>
			<h:outputLabel value="Email: " for="clienteEmail" />
			<p:inputText id="clienteEmail" value="#{cadastroClienteMB.cliente.email}" />
		</h:panelGrid>
		<ui:repeat varStatus="loop" var="telefone" value="#{cadastroClienteMB.cliente.listaTelefones}">
			<h:panelGrid columns="2">
				<h:outputLabel value="Telefone: " />
				<p:inputText value="#{cadastroClienteMB.cliente.listaTelefones[loop.index].numero}" readonly="#{!empty cadastroClienteMB.cliente.listaTelefones[loop.index].numero}"/>
			</h:panelGrid>
		</ui:repeat>
		<p:commandButton value="+ 1" actionListener="#{cadastroClienteMB.adicionarMaisUmTelefone()}" immediate="true" update="panelDadosCliente" ajax="true"/>
		<p:commandButton value="Salvar Cliente" process="panelDadosCliente" actionListener="#{cadastroClienteMB.salvarCliente()}" ajax="true"/>
	</p:panel>
</html>

